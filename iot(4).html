<!DOCTYPE html>
<html>
<head>
<title>iot.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>
<link rel="stylesheet" href="file:///e%3A/USB%20%E5%82%99%E4%BB%BD/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E7%B6%B2%E9%A0%81%28%E4%B8%80%29/volume1/web/blog.allen5183.synology.me/source/_posts/markdown.css" type="text/css">
<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js'></script>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.css' />
<script src='https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js'></script>
<h2 id="0-%E8%AA%B2%E7%A8%8B%E6%BA%96%E5%82%99">0. 課程準備</h2>
<ol>
<li><a href="https://drive.google.com/drive/folders/1YhOhREq4PmGqmGdS4rLc_dzmm0w92UTs?usp=sharing">雲端硬碟</a></li>
<li><a href="https://www.youtube.com/embed/zvrGOu8QFSo">生活智慧屋展示</a>
<br><iframe width="560" height="315" src="https://www.youtube.com/embed/zvrGOu8QFSo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</li>
<li><a href="https://drive.google.com/file/d/1EYgZEVWCqUnCRPuZ4-5JPg1hLfFeTPQs/view?usp=sharing">講義</a></li>
</ol>
<h2 id="1-%E7%A1%AC%E9%AB%94%E5%BB%BA%E7%BD%AE">1. 硬體建置</h2>
<h3 id="11-%E9%85%8D%E7%B7%9A%E5%9C%96">1.1 配線圖</h3>
<ul>
<li>
<p>樹莓派腳位圖</p>
<p><a data-fancybox="gallery" href='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210602102127.png'><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210602102127_s.png' class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>樹莓派與其他裝置連接腳位圖</p>
<table>
<thead>
<tr>
<th style="text-align:left">PI3 B+ 腳位</th>
<th style="text-align:left">PI3 B+ 功能描述</th>
<th style="text-align:left">其他裝置腳位</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">PI3 B+ 18</td>
<td style="text-align:left">GPIO 24</td>
<td style="text-align:left">Buzzer I/O</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 2</td>
<td style="text-align:left">5V Power</td>
<td style="text-align:left">Buzzer VCC、SG 900 VCC(紅)</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 6</td>
<td style="text-align:left">GND</td>
<td style="text-align:left">Buzzer GND、SG 900 GND(褐)</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 11</td>
<td style="text-align:left">GPIO 17</td>
<td style="text-align:left">DHT 11 Out</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 4</td>
<td style="text-align:left">5V Power</td>
<td style="text-align:left">DHT +</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 20</td>
<td style="text-align:left">GND</td>
<td style="text-align:left">DHT -</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 12</td>
<td style="text-align:left">GPIO 18 PCM_CLK</td>
<td style="text-align:left">SG 900 訊號(橘)</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 37</td>
<td style="text-align:left">GPIO 26</td>
<td style="text-align:left">RELAY IN1</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 13</td>
<td style="text-align:left">GPIO 27</td>
<td style="text-align:left">RELAY IN2</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 15</td>
<td style="text-align:left">GPIO 22</td>
<td style="text-align:left">RELAY IN3</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 16</td>
<td style="text-align:left">GPIO 23</td>
<td style="text-align:left">RELAY IN4</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 24</td>
<td style="text-align:left">GPIO  8 SPIO_CE0_N</td>
<td style="text-align:left">RFID RC522 SDA</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 23</td>
<td style="text-align:left">GPIO 11 SPIO_SCLK</td>
<td style="text-align:left">RFID RC522 SCK</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 19</td>
<td style="text-align:left">GPIO 10 SPIO_MOSI</td>
<td style="text-align:left">RFID RC522 MOSI</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 21</td>
<td style="text-align:left">GPIO  9 SPIO_MISO</td>
<td style="text-align:left">RFID RC522 MISO</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 25</td>
<td style="text-align:left">GND</td>
<td style="text-align:left">RFID RC522 GND</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 22</td>
<td style="text-align:left">GPIO 25</td>
<td style="text-align:left">RFID RC522 RST</td>
</tr>
<tr>
<td style="text-align:left">PI3 B+ 17</td>
<td style="text-align:left">3V3 Power</td>
<td style="text-align:left">RFID RC522 3.3V</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3 id="12-%E7%B6%B2%E8%B7%AF%E8%A8%AD%E5%AE%9A%E5%8F%83%E8%80%83">1.2 網路設定參考</h3>
<p>有兩處可以修正網卡設定，擇一來設定，第一種方法會優先。</p>
<ol>
<li>
<p><code>sudo nano /etc/dhcpcd.conf</code></p>
</li>
<li>
<p><code>sudo nano /etc/network/interfaces</code></p>
<pre class="hljs"><code><div>#表示使用 localhost
auto lo 
# 有網路卡 eth0，則用靜態方式設定 IP:
iface eth0 inet static
static ip_address=192.168.57.40
static routers=192.168.57.254
static domain_name_servers=8.8.8.8 168.95.1.1

# DHCP
#iface eth0 inet dhcp
# 有網路卡 eth0，則使用 dhcp 獲取 IP:
#static domain_name_servers=8.8.#8.8 168.95.1.1

# Wifi
#auto wlan0 #有 WLAN 使用 wlan0 裝置名稱
#wlan裝置可以熱拔插
#allow-hotplug wlan0
#有WLAN 網路時，使用 wpa-psk 認證方式
#iface wlan0 inet dhcp
#wpa-ssid &quot;yvts&quot;
#wpa-psk  &quot;yvtsyvts&quot;
</div></code></pre>
<p><strong>重新啟動</strong>
<code>sudo /etc/init.d/networking restart</code></p>
</li>
</ol>
<h2 id="2-%E7%92%B0%E5%A2%83%E8%A8%AD%E7%BD%AE">2. 環境設置</h2>
<h3 id="21-ssh-%E5%85%8D%E5%AF%86%E7%A2%BC%E7%99%BB%E5%85%A5">2.1 SSH 免密碼登入</h3>
<ol>
<li>
<p>使用系統管理者權限，修改檔案 <code>c:\windows\system32\drivers\etc\hosts</code></p>
<p>增加一筆資料如下:</p>
<pre class="hljs"><code><div>192.168.xxx.xxx    smarthome.edu.tw
</div></code></pre>
</li>
<li>
<p>測試:</p>
<pre class="hljs"><code><div>ping smarthome.edu.tw
</div></code></pre>
</li>
<li>
<p>本機端(Window)，安裝 <a href="https://git-scm.com/downloads">Git</a></p>
</li>
<li>
<p>設定識別資料, 使用 <code>Git bash</code> 開啟終端機視窗後，執行如下命令:</p>
<pre class="hljs"><code><div>git config --global user.name  <span class="hljs-string">"John Doe"</span>
git config --global user.email  johndoe@example.com

<span class="hljs-comment">#指定編輯器</span>
git config --global core.editor <span class="hljs-string">"'C:/Program Files (x86)/Notepad++/notepad++.exe' -multiInst -nosession"</span>
<span class="hljs-comment">#or</span>
git config --global core.editor <span class="hljs-string">"'C:/tools/nano.exe' -multiInst -nosession"</span>   
git config --list
</div></code></pre>
</li>
<li>
<p>配置 <code>sshd</code> 服務，允許認證金鑰檔案:</p>
<pre class="hljs"><code><div><span class="hljs-comment">#登入 PI</span>
ssh pi@smarthome.edu.tw
<span class="hljs-comment">#修改 SSH Daemon 服務組態檔</span>
sudo nano /etc/ssh/sshd_config
<span class="hljs-comment"># 將最前面的註解符號 `#` 取消掉，如下</span>
  AuthorizedKeysFile      .ssh/authorized_keys
</div></code></pre>
</li>
<li>
<p>在定時備份或批次遠端處理，往往需要免密碼登入遠端主機工作。為達此目的，首先必須在 client 端產生一組 key，包含公開金鑰（Public Key）與私密金鑰（Private Key），將公鑰送到要登入的主機，相互對應做免密碼的登入。</p>
<pre class="hljs"><code><div><span class="hljs-comment">#檢查有無私鑰與公鑰(本機端 PC)</span>
ls -al ~/.ssh/id_rsa.pub
ls -al ~/.ssh/id_rsa
<span class="hljs-comment">#若沒有金鑰的話，key 的產生方法：</span>
ssh-keygen -t rsa -C xxx@gmail.com

Generating public/private rsa key pair.
Enter file <span class="hljs-keyword">in</span> <span class="hljs-built_in">which</span> to save the key (/root/.ssh/id_rsa):
Enter passphrase (empty <span class="hljs-keyword">for</span> no passphrase):
Enter same passphrase again:
Your identification has been saved <span class="hljs-keyword">in</span> /root/.ssh/id_rsa.
Your public key has been saved <span class="hljs-keyword">in</span> /root/.ssh/id_rsa.pub.
The key fingerprint is:
c3:e9:25:65:00:c8:65:cb:e8:fe:4e:7e:ce:06:a4:9d root@kvm8.deyu.wang
The key<span class="hljs-string">'s randomart image is:
+--[ RSA 2048]----+
|   . o+..        |
|    o+ . .       |
|    . o   o      |
|   .  .. +       |
|    .+ .S .      |
|   .. E. +       |
|    . ...        |
|     + .o        |
|     .++o        |
+-----------------+
</span></div></code></pre>
</li>
<li>
<p>將公開金鑰放到要登入的主機上，利用以下指令完成:</p>
<pre class="hljs"><code><div>ssh pi@smarthome.edu.tw <span class="hljs-string">'mkdir -p ~/.ssh; cat &gt;&gt; ~/.ssh/authorized_keys'</span> &lt; ~/.ssh/id_rsa.pub
</div></code></pre>
</li>
<li>
<p>登入測試</p>
<pre class="hljs"><code><div>ssh pi@smarthome.edu.tw
</div></code></pre>
<blockquote>
<p>特別注意目錄 .ssh 及檔案 authorized_keys 的權限，若群組或其他人的權限過大，除了安全性有問題外，也有可能因 ssh 判斷要對應的金鑰不安全，而無法對應，也就是不能免密碼登入。</p>
</blockquote>
</li>
<li>
<p>調整權限<br>
設定 PI 上的authorized_keys 可讀、寫</p>
<pre class="hljs"><code><div>ssh pi@smarthome.edu.tw <span class="hljs-string">"chmod 600 ~/.ssh/authorized_keys"</span>
<span class="hljs-comment"># 設定 PI 上的authorized_keys 唯讀</span>
   ssh pi@smarthome.wda.edu.tw <span class="hljs-string">"chmod 400 ~/.ssh/authorized_keys"</span>
</div></code></pre>
</li>
<li>
<p>再簡化登入程序: 本機 PC 端，加入 <code>config</code>, 簡化 <code>ssh</code> 登入指令</p>
<ul>
<li>
<p>在 <code>~/.ssh</code> 下新增 <code>config</code> 檔案，不需任何副檔名。</p>
</li>
<li>
<p>在新增的檔案裡加上你的第一個 SSH config</p>
<p><code>nano ~/.ssh/config</code></p>
<pre class="hljs"><code><div>Host pi                    <span class="hljs-comment"># 用來連線的 alias 名稱</span>
HostName smarthome.edu.tw  <span class="hljs-comment"># host domain 或 ip</span>
Port 22                    <span class="hljs-comment"># host 的 SSH port</span>
User pi                    <span class="hljs-comment"># (選填)登入 SSH 的 username，</span>
                           <span class="hljs-comment">#  只連 git 的話，可以不必要</span>
ForwardX11 yes             <span class="hljs-comment"># (選填) 啟用回傳 GUI</span>
</div></code></pre>
</li>
<li>
<p>測試
<code>ssh pi</code></p>
</li>
</ul>
</li>
<li>
<p>常用 SSH 指令</p>
<pre class="hljs"><code><div><span class="hljs-comment">#基本連線</span>
ssh username@hostname[ip]  
<span class="hljs-comment">#SSH 連線再附加其他指令</span>
ssh pi mkdir <span class="hljs-built_in">test</span>
<span class="hljs-comment">#scp 指定 SSH name</span>
scp -r ./ pi:/var/www/html/project/
</div></code></pre>
</li>
<li>
<p>本機電腦端設定:</p>
<pre class="hljs"><code><div>d:
<span class="hljs-built_in">cd</span> d:\xampp\htdocs

<span class="hljs-comment">#打開現行工作目錄</span>
code .
</div></code></pre>
<p>然後在 <code>vscode</code> 視窗下建立一新目錄 <code>smarthome</code>，就可以點擊滑鼠左鍵，來執行下載樹莓派檔案。</p>
</li>
<li>
<p>安裝 vscode 的套件 <code>sftp</code>
F1 或 Ctrl+Shift+P, 選擇 SFTP:Config</p>
<p>加入以下設定:</p>
<pre class="hljs"><code><div>[
   {
       :
   } ,

   {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"My Server"</span>,
    <span class="hljs-string">"host"</span>: <span class="hljs-string">"smarthome.edu.tw"</span>,
    <span class="hljs-string">"protocol"</span>: <span class="hljs-string">"sftp"</span>,
    <span class="hljs-string">"port"</span>: 22,
    <span class="hljs-string">"username"</span>: <span class="hljs-string">"pi"</span>,
    <span class="hljs-string">"privateKeyPath"</span>: <span class="hljs-string">"C:/Users/allen/.ssh/id_rsa"</span>,
    <span class="hljs-string">"remotePath"</span>: <span class="hljs-string">"/home/pi/www"</span>,
    <span class="hljs-string">"uploadOnSave"</span>: <span class="hljs-literal">true</span>
  }
]  
</div></code></pre>
</li>
</ol>
<h3 id="22-%E5%AE%89%E8%A3%9D-apache--mysql-php">2.2 安裝 <code>Apache + MySQL+ PHP</code></h3>
<ol>
<li>
<p>更新軟體套件清單
<code>sudo apt get update y</code></p>
</li>
<li>
<p>更新軟體套件本身
<code>sudo apt get upgrade y</code></p>
</li>
<li>
<p>重啟
<code>reboot</code></p>
</li>
</ol>
<h4 id="221-%E5%AE%89%E8%A3%9D-apache-php">2.2.1 安裝 Apache PHP</h4>
<ol>
<li>
<p>安裝軟體</p>
<pre class="hljs"><code><div>sudo apt get install apache2 y
sudo apt get install php mysql y
sudo apt get install php mbstring y
sudo systemctl restart apache2
sudo nano /etc/apache2 apache2.conf <span class="hljs-comment">## 設定文件</span>
</div></code></pre>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160012.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160012_s.png" class="nofancybox  img-center" /></a>
</br>
<a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160111.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160111_s.png" class="nofancybox  img-center" /></a></p>
<p><code>sudo nano /etc/ports.conf</code></p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160507.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601160507_s.png" class="nofancybox  img-center" /></a></p>
<p><strong>重啟伺服器</strong>
<code>sudo systemctl restart apache2</code></p>
</li>
<li>
<p>驗證 <code>apache</code> 正常運作：</p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601161921.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601161921_s.png" class="nofancybox  img-center" /></a></p>
<pre class="hljs"><code><div><span class="hljs-built_in">cd</span> /var/www/html/
sudo mv index.html index1.html
</div></code></pre>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601162829.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601162829_s.png" class="nofancybox  img-center" /></a></p>
</li>
<li>
<p>修改根目錄：</p>
<pre class="hljs"><code><div>mkdir -p /home/pi/www/web
sudo chown -R pi:www-data /home/pi/www/web
chmod -R 770 /home/pi/www/web
sudo nano /etc/apache2/apache2.conf
</div></code></pre>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601165908.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601165908_s.png" class="nofancybox  img-center" /></a></p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601165936.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601165936_s.png" class="nofancybox  img-center" /></a></p>
<p><code>sudo nano /etc/apache2/sites-enabled/000-default.conf</code></p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601163545.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601163545_s.png" class="nofancybox  img-center" /></a></p>
<blockquote>
<p>cd /etc/apache2/sites-available
sudo ln -s /etc/apache2/sites-enabled/000-default.conf
sudo systemctl restart apache2</p>
</blockquote>
</li>
<li>
<p>加入虛擬新網域</p>
<ul>
<li>
<p>新網域名稱: <code>smarthome.edu.tw</code></p>
</li>
<li>
<p>建立資料夾: <code>mkdir ~/www/smarthome</code></p>
</li>
<li>
<p>修改現有檔案: <code>nano /etc/apache2/sites-enabled/000-default.conf</code></p>
<pre class="hljs"><code><div>&lt;VirtualHost *:80&gt;
  ServerName smarthome.edu.tw
  #ServerAdmin webmaster@localhost
  DocumentRoot /home/pi/www/smarthome

  &lt;Directory /home/pi/www/smarthome&gt;
    Options indexes FollowSymLinks
    AllowOverride None
    Require all granted
  &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</div></code></pre>
</li>
</ul>
</li>
<li>
<p>重啟 <code>Apache</code> 伺服器
<code>sudo systemctl restart apache2</code></p>
</li>
<li>
<p>開啟 <code>PHP</code> 錯誤日誌
<code>sudo nano /etc/php/7.0/apache2/php.ini</code></p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601163646.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601163646_s.png" class="nofancybox  img-center" /></a></p>
</li>
</ol>
<h4 id="222-%E5%AE%89%E8%A3%9D-mysql">2.2.2 安裝 MySQL</h4>
<ul>
<li>
<p>安裝
<code>apt cache search mysql server</code>
<code>sudo apt get install mysql server</code></p>
</li>
<li>
<p>Setting MySQL/MariaDB root password</p>
<pre class="hljs"><code><div>sudo mysql u root p
mysql&gt; use mysql;
mysql&gt; update user <span class="hljs-built_in">set</span> plugin=<span class="hljs-string">''</span> <span class="hljs-built_in">where</span> u ser=<span class="hljs-string">'root'</span>;
mysql&gt; flush privileges;

(刷新權限，當你直接通過 update 權限後，需要通過刷新使你的授權有效)

mysql&gt; <span class="hljs-built_in">exit</span>
sudo mysql_secure_installation
sudo mysql u root p
</div></code></pre>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601170430.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601170430_s.png" class="nofancybox  img-center" /></a></p>
<p><a href="https://websiteforstudents.com/mariadb--installedinstalled--witwithouthout--passwordpassword--promptsprompts--forfor--rootroot--onon--ubuntuubuntu--1717--1010--1818--0404--beta/beta/">參考文獻</a></p>
</li>
</ul>
<h4 id="223-%E5%AE%89%E8%A3%9D-phpmyadmin">2.2.3 安裝 phpmyadmin</h4>
<ul>
<li>
<p>安裝 <code>sudo nano ~/www/web/info.php</code></p>
<p>內容加入：</p>
<pre class="hljs"><code><div><span class="hljs-meta">&lt;?php</span>
  phpinfo();
<span class="hljs-meta">?&gt;</span>
</div></code></pre>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191331.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191331_s.png" class="nofancybox  img-center"/></a></p>
</li>
<li>
<p>檢查 <code>MySql</code> 版本</p>
<p><code>sudo mysql --version</code></p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191548.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191548_s.png" class="nofancybox  img-center"/></a></p>
</li>
<li>
<p>檢查 <code>PHP</code> 版本<br>
<code>sudo php --version</code></p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191856.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601191856_s.png" /></a></p>
</li>
<li>
<p>找尋下載檔案 <a href="https://www.phpmyadmin.net/downloads/">phpmyadmin</a></p>
<p><a href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601192053.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601192053_s.png" class="nofancybox  img-center" /></a></p>
<blockquote>
<p>補充:
不可以使用 phpmyadmin 4.9+snapshot 的版本(不支援繁體中文，不穩定版本)</p>
</blockquote>
</li>
<li>
<p>下載與安裝</p>
<pre class="hljs"><code><div><span class="hljs-string">cd</span> <span class="hljs-string">~/www/web/</span>
<span class="hljs-string">sudo</span> <span class="hljs-string">wget</span> <span class="hljs-string">https://files.phpmyadmin.net/phpMyAdmin/4.7.3/phpMyAdmin-4.7.3-alllanguages.tar.gz</span>
<span class="hljs-string">sudo</span> <span class="hljs-string">tar</span> <span class="hljs-string">-zxvf</span> <span class="hljs-string">phpMyAdmin-4.7.3-all-languages.tar.gz</span>
<span class="hljs-string">sudo</span> <span class="hljs-string">mv</span> <span class="hljs-string">phpMyAdmin-4.7.3-all-languages</span> <span class="hljs-string">phpMyAdmin</span>
</div></code></pre>
</li>
</ul>
<h4 id="224-%E8%A7%A3%E6%B1%BA-%E7%BC%BA%E5%B0%91-tmp-%E8%88%87-%E7%A7%BB%E9%99%A4%E5%85%B6%E4%BB%96%E8%AD%A6%E5%91%8A%E8%A8%8A%E6%81%AF">2.2.4 解決 缺少 tmp 與 移除其他警告訊息</h4>
<ul>
<li>現象
<a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601194654.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601194654_s.png" class="nofancybox  img-center" /></a>
<ul>
<li>
<p>解決 1: 移除設定檔案需要設定一組加密密碼 (blowfish_secret)</p>
<pre class="hljs"><code><div>sudo cp /var/www/html/phpMyAdmin/config.sample.inc.php  ~/www/web/phpMyAdmin/config.inc.php
</div></code></pre>
<p><code>sudo nano ~/www/web/phpMyAdmin/config.inc.php</code></p>
<p>將檔案內的 <code>$cfg['blowfish_secret'] = '';</code>
設定為 ：(至少要 32 個字元)</p>
<p><code>$cfg['blowfish_secret'] = 'xxxxxxxxxxxxxxxx';</code></p>
<blockquote>
<p>意思是：加上一堆亂七八糟的英文數字當作秘鑰</p>
</blockquote>
</li>
<li>
<p>解決 2: 移除 <code>tmp</code> 警告訊息</p>
<pre class="hljs"><code><div>sudo rm -rf /var/www/html/phpMyAdmin/tmp(若本來就存在，刪除再新增)
sudo mkdir /var/www/html/phpMyAdmin/tmp
sudo chmod 777 /var/www/html/phpMyAdmin/tm
</div></code></pre>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601195724.png"><img src="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/20210601195724_s.png" class="nofancybox  img-center" /></a></p>
</li>
</ul>
</li>
</ul>
<h2 id="3-%E5%BD%B1%E5%83%8F%E4%B8%B2%E6%B5%81-mjpg-streamer-for-webcam">3. 影像串流  MJPG-STREAMER for WebCam</h2>
<h3 id="31-%E8%AA%AA%E6%98%8E">3.1 說明</h3>
<p>  安裝 <code>mjpg-streamer</code>， <code>mjpg-streamer</code> 是用來將視訊網路串流化，透過 <code>mjpg</code> 裡面的解碼器，可以讓影像擷取速率以及畫質有良好的表現。</p>
<ul>
<li>
<p><a href="http://www.linux-projects.org/uv4l/installation/">參考文獻</a></p>
</li>
<li>
<p>PI 上安裝影像串流(mjpg-streamer)，把 <code>Raspberry Pi</code> 轉成 <code>Webcam server</code></p>
</li>
<li>
<p>PI 上安裝 <code>Motion</code>， 動態捕捉, 依照間格時間來抓取.</p>
</li>
</ul>
<h3 id="32-%E5%AE%89%E8%A3%9D%E7%9B%B8%E9%97%9C%E5%A5%97%E4%BB%B6">3.2 安裝相關套件</h3>
<ul>
<li>
<p>步驟</p>
<pre class="hljs"><code><div><span class="hljs-comment">#更新 apt-get</span>
sudo apt-get update
sudo apt-get upgrade
<span class="hljs-comment">#安裝依賴包</span>
sudo apt-get install subversion
sudo apt-get install libjpeg-dev
sudo apt-get install imagemagick
sudo apt-get install libv4l-dev
</div></code></pre>
</li>
</ul>
<h3 id="33-%E5%AE%89%E8%A3%9D-mjpg-streamer">3.3 安裝 <code>mjpg-streamer</code></h3>
<ul>
<li>
<p>步驟</p>
<pre class="hljs"><code><div>mkdir ~/<span class="hljs-built_in">source</span>
<span class="hljs-built_in">cd</span> ~/<span class="hljs-built_in">source</span>
<span class="hljs-comment"># 利用 svn 把最新版的 mjpg-streamer 抓下來</span>
svn co https://svn.code.sf.net/p/mjpg-streamer/code/
<span class="hljs-built_in">cd</span> code/mjpg-streamer
make
sudo make install

<span class="hljs-comment"># 拷貝到 *.so /usr/local/lib</span>
sudo cp  *.so /usr/<span class="hljs-built_in">local</span>/lib/.
<span class="hljs-comment"># 拷貝到 mjpg_streamer 到 /usr/local/bin</span>
sudo cp mjpg_streamer  /usr/<span class="hljs-built_in">local</span>/bin/.
</div></code></pre>
</li>
</ul>
<h3 id="34-%E5%81%9C%E6%AD%A2-motion">3.4 停止 <code>motion</code></h3>
<ul>
<li>
<p>步驟</p>
<pre class="hljs"><code><div><span class="hljs-comment">#如果 motion 還在啟動中，先停掉</span>
sudo service motion stop
</div></code></pre>
</li>
</ul>
<h3 id="35-%E5%95%9F%E5%8B%95-mjpg-streamer">3.5 啟動 <code>mjpg-streamer</code></h3>
<ul>
<li>
<p>步驟</p>
<pre class="hljs"><code><div><span class="hljs-comment"># 先打開 pi carmera</span>
sudo raspi-config
</div></code></pre>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-1.png"><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-1_s.png' class='nofancybox  img-center' /></a></p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-2.png"><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-2_s.png' class='nofancybox  img-center' /></a></p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-3.png"><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-3_s.png' class='nofancybox  img-center' /></a></p>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-4.png"><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-4_s.png' class='nofancybox  img-center' /></a></p>
<p><strong>須重開機</strong></p>
<pre class="hljs"><code><div><span class="hljs-built_in">cd</span> ~/<span class="hljs-built_in">source</span>/code/mjpg-streamer
sudo ./mjpg_streamer -i <span class="hljs-string">"./input_uvc.so -f 10 -r 1024x768 -d /dev/video0 -y -n"</span> -o <span class="hljs-string">"./output_http.so -w ./www -p 8080"</span>
</div></code></pre>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-5.png"><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_mjpeg-streamer-5_s.png' class='nofancybox  img-center' /></a></p>
<blockquote>
<p><code>320x240</code> 也可以修改為 <code>640x480</code>，如果啟動失敗，請再執行下列程序:</p>
</blockquote>
<pre class="hljs"><code><div>sudo nano  /etc/modules
</div></code></pre>
<p>#加入以下內容 :
bcm2835-v412</p>
<p>#重新啟動
<code>sudo reboot</code></p>
</li>
</ul>
<h3 id="36-%E6%B8%AC%E8%A9%A6">3.6 測試</h3>
<p>  啟動後在 raspberry ip 位置。例如: <code>192.168.62.100:8080/stream.html</code> 中，檢查有沒有看到影像串流。</p>
<p>  <code>http://smarthome.edu.tw:8080/?action=streamer</code></p>
<p>  或
  <code>http://smarthome.edu.tw:8080/stream_simple.html</code></p>
<p>  如果要客制化頁面的，可以再在自己的頁面上加上 <code>tag</code>
  <code>http://192.168.62.100:8080/?action=stream&quot;</code>，就能捉的到串流影像。</p>
<ul>
<li>
<p>例:</p>
<pre class="hljs"><code><div><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">align</span>=<span class="hljs-string">center</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"560"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"315"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://192.168.62.100:8080/?action=stream"</span>" <span class="hljs-attr">frameborder</span>=<span class="hljs-string">" 0"</span>
      <span class="hljs-attr">allowfullscreen</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</div></code></pre>
</li>
</ul>
<h3 id="37-%E8%A8%AD%E7%BD%AE%E7%99%BB%E5%85%A5%E5%B8%B3%E8%99%9F%E5%92%8C%E5%AF%86%E7%A2%BC">3.7 設置登入帳號和密碼</h3>
<ul>
<li>
<p>關掉服務</p>
<pre class="hljs"><code><div><span class="hljs-comment">#查指定程序 id</span>
pidof mjpg_streamer
<span class="hljs-comment">#刪除指定 id</span>
<span class="hljs-built_in">kill</span> -9 [pid of mjpg_streamer]

sudo ./mjpg_streamer -i <span class="hljs-string">"./input_uvc.so -f 10 -r 320x240 -d /dev/video0 -y -n"</span> -o <span class="hljs-string">"./output_http.so -w ./www -p 8080 -c userid:password"</span>
</div></code></pre>
</li>
</ul>
<h3 id="38-%E9%96%8B%E6%A9%9F%E6%99%82%E8%87%AA%E5%8B%95%E5%9F%B7%E8%A1%8C%E4%B8%B2%E6%B5%81%E4%BC%BA%E6%9C%8D%E5%99%A8">3.8 開機時自動執行串流伺服器</h3>
<ul>
<li>
<p>操作步驟如下:</p>
<pre class="hljs"><code><div>cd ~/source
nano mjpg.py
</div></code></pre>
<p>內容如下:</p>
<pre class="hljs"><code><div><span class="hljs-string">import</span> <span class="hljs-string">os</span>
<span class="hljs-string">os.system('LD_LIBRARY_PATH=/usr/local/lib</span> <span class="hljs-string">mjpg_streamer</span> <span class="hljs-string">-i</span> <span class="hljs-string">"input_uvc.so -y -r 1024x768 -n"</span> <span class="hljs-string">-o</span> <span class="hljs-string">"output_http.so -w /home/pi/source/code/mjpg-streamer/www"</span><span class="hljs-string">')
</span></div></code></pre>
<p>#改變屬性(可執行)</p>
<pre class="hljs"><code><div>chmod 755 mjpg.py
sudo nano /etc/crontab

SHELL=/bin/sh

<span class="hljs-comment">#0 0 * * * root  python /home/pi/source/mjpg.py</span>
@reboot root python /home/pi/<span class="hljs-built_in">source</span>/mjpg.py &amp;
</div></code></pre>
<blockquote>
<p>注意: import os 與 os.system() 注意前面不要空行</p>
</blockquote>
</li>
</ul>
<h2 id="4-gpio-%E6%8E%A7%E5%88%B6">4. GPIO 控制</h2>
<h3 id="41-%E8%AA%AA%E6%98%8E">4.1 說明</h3>
<p>  網頁控制 LED(燈與風扇) Relay Control (GPIO)，現在方法使用國外人寫的一個插件模組<a href="http://wiringpi.com/download-and-install/">wiringPI</a>, 然後在網頁上使用執行 linux shell command 來控制腳位(針腳)用 php 控制．</p>
<blockquote>
<p>可改寫成不用這插件, 直接用 <code>python</code> 來控制腳位</p>
</blockquote>
<h3 id="42-%E8%85%B3%E4%BD%8D%E6%8E%A7%E5%88%B6-gpio">4.2 腳位控制 GPIO</h3>
<ul>
<li>
<p>腳位</p>
<table>
<thead>
<tr>
<th>腳位名稱</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>GPIO26</td>
<td>RELAY IN1 For Fan</td>
</tr>
<tr>
<td>GPIO27</td>
<td>RELAY IN2 For LED</td>
</tr>
<tr>
<td>GPIO22</td>
<td>RELAY IN3 For LED</td>
</tr>
<tr>
<td>GPIO23</td>
<td>RELAY IN4 For LED</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>安裝模組 <code>wiringPi</code></p>
<pre class="hljs"><code><div>`sudo apt-get install wiringpi`
</div></code></pre>
<blockquote>
<p>目前 PI 都已內建支援 GPIO，使用命令： <code>pinout</code> 可得知腳位訊息。</p>
</blockquote>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-gpio-pinout.png"><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot-gpio-pinout_s.png' class='nofancybox  img-center' /></a></p>
</li>
</ul>
<h3 id="43-%E6%B8%AC%E8%A9%A6%E6%9C%89%E7%84%A1-wiringpi-%E6%A8%A1%E7%B5%84">4.3 測試有無 <code>WiringPi</code> 模組</h3>
<ul>
<li>
<p>檢查 GPIO 版本</p>
<pre class="hljs"><code><div>gpio -v
</div></code></pre>
</li>
<li>
<p>顯示目前所有 GPIO 的輸入或輸出狀態</p>
<pre class="hljs"><code><div>sudo gpio readall
</div></code></pre>
<p><a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_gpio_readall.png"><img src='https://cdn.jsdelivr.net/gh/allen-5183/blog.allen5183.synology.me/images/wiot_gpio_readall_s.png' class='nofancybox  img-center' /></a></p>
</li>
</ul>
<h3 id="44-%E6%B8%AC%E8%A9%A6%E7%A1%AC%E9%AB%94%E6%8E%A5%E7%B7%9A%E7%8B%80%E6%85%8B">4.4 測試硬體接線狀態</h3>
<ul>
<li>
<p>使用下列指令作測試</p>
<pre class="hljs"><code><div>gpio -g mode 26 out
gpio -g write 26 1
gpio -g write 26 0

gpio -g mode 27 out
gpio -g write 27 1
gpio -g write 27 0

gpio -g mode 22 out
gpio -g write 22 1
gpio -g write 22 0

gpio -g mode 23 out
gpio -g write 23 1
gpio -g write 23 0
</div></code></pre>
<blockquote>
<p><a href="https://www.raspberrypi.org/documentation/configuration/config-txt/gpio.md">參考文件: GPIO Control</a></p>
</blockquote>
</li>
</ul>
<h3 id="45-%E4%BD%BF%E7%94%A8%E7%B6%B2%E9%A0%81%E6%8A%80%E8%A1%93%E7%A8%8B%E5%BC%8F%E6%8E%A7%E5%88%B6-gpio">4.5 使用網頁技術程式控制 <code>GPIO</code></h3>
<h4 id="451-%E5%96%AE%E9%A1%86%E6%8E%A7%E5%88%B6">4.5.1 單顆控制</h4>
<ul>
<li><code>gpio1.php</code></li>
<li><code>gpio2.php</code></li>
<li><code>gpio3.php</code></li>
<li><code>gpio4.php</code></li>
</ul>
<h4 id="452-%E5%A4%9A%E9%A1%86%E6%8E%A7%E5%88%B6">4.5.2 多顆控制</h4>
<ul>
<li><code>gpio_all.php</code></li>
</ul>
<h4 id="453-%E4%BD%BF%E7%94%A8-ajax-%E6%8A%80%E8%A1%93-%E4%B8%B2%E6%8E%A5-api-%E6%8E%A7%E5%88%B6">4.5.3 使用 <code>Ajax</code> 技術 串接 <code>API</code> 控制</h4>
<ul>
<li><code>gpio_all_ajax.php</code></li>
<li><code>gpio_all_ajax_api.php</code></li>
</ul>
<h4 id="454-%E4%BD%BF%E7%94%A8-webstorage-%E5%84%B2%E5%AD%98%E7%8B%80%E6%85%8B%E6%8E%A7%E5%88%B6-led">4.5.4 使用 Webstorage 儲存狀態，控制 LED</h4>
<ul>
<li><code>gpioControl.php</code></li>
</ul>

</body>
</html>
